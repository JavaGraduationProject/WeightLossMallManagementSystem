var W=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var x=(e,n,t)=>n in e?W(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,A=(e,n)=>{for(var t in n||(n={}))Z.call(n,t)&&x(e,t,n[t]);if(L)for(var t of L(n))P.call(n,t)&&x(e,t,n[t]);return e},D=(e,n)=>X(e,Y(n));import{r as M,al as G,g as I,t as U,S as ee,m,o as v,j as h,w as y,n as _,J as N,y as O,q as $,A as j,k as a,F as B,am as te,u as le,i as J,an as ne,ao as ae,D as w,x as F,ap as oe,I as se,aq as ue,ac as re,ar as ie,as as de,at as pe}from"./vendor.6c10456e.js";const Q="ujcms_column_settings";function ce(){const e=localStorage.getItem(Q);return e?JSON.parse(e):{}}const q=M({}),C=M(ce());function me(){localStorage.setItem(Q,JSON.stringify(C))}const fe=e=>(q[e]||(q[e]=[]),G(q,e)),z=(e,n)=>{for(let t=0,u=e.length;t<u;)n.findIndex(p=>p.title===e[t].title)===-1?(e.splice(t,1),u-=1):t+=1;return n.forEach(t=>{e.findIndex(u=>u.title===t.title)===-1&&e.push(A({},t))}),e},ve=(e,n)=>{q[e]=n,C[e]||(C[e]=[]);const t=C[e];z(t,n)},H=e=>(C[e]||(C[e]=[]),G(C,e)),he=I({props:{name:{type:String,required:!0}},setup(e){const n=e,{name:t}=U(n),u=H(t.value),p=fe(t.value);ee(u,()=>me(),{deep:!0});const c=()=>{u.value=z([],p.value)};return(V,d)=>{const g=m("el-icon"),i=m("el-tooltip"),k=m("el-button"),o=m("el-dropdown-item"),f=m("el-checkbox"),s=m("el-dropdown-menu"),r=m("el-dropdown");return v(),h(r,{class:"align-middle",trigger:"click","hide-on-click":!1},{dropdown:y(()=>[_(s,null,{default:y(()=>[_(o,null,{default:y(()=>[_(k,{onClick:c,type:"text"},{default:y(()=>[N(O(V.$t("table.columnsReset")),1)]),_:1})]),_:1}),(v(!0),$(B,null,j(a(u),(l,E)=>(v(),h(o,{key:l.title,divided:E===0},{default:y(()=>[_(f,{modelValue:l.display,"onUpdate:modelValue":R=>l.display=R},{default:y(()=>[N(O(l.title),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["divided"]))),128))]),_:1})]),default:y(()=>[_(i,{content:V.$t("table.columnsSetting"),placement:"top"},{default:y(()=>[_(g,{class:"text-base"},{default:y(()=>[_(a(te))]),_:1})]),_:1},8,["content"])]),_:1})}}}),Se=I({name:"ColumnList",props:{name:{type:String,required:!0}},setup(e,{slots:n}){var i,k;const{name:t}=U(e),{t:u}=le(),p=(k=(i=n.default)==null?void 0:i.call(n))!=null?k:[],c=o=>(o==null?void 0:o.type)==="selection"?u("table.selection"):o==null?void 0:o.label,V=p.map(o=>{var f;return{title:c(o.props),display:((f=o.props)==null?void 0:f.display)!=="none"}});ve(t.value,V);const d=H(t.value);return{columns:J(()=>p.filter(o=>{const f=d.value.find(s=>c(o.props)===s.title);return!f||f.display}).map(o=>D(A({},o),{key:c(o.props)})).sort((o,f)=>{let s=d.value.findIndex(l=>l.title===c(o));s<0&&(s=p.findIndex(l=>c(l)===c(o)));let r=d.value.findIndex(l=>l.title===c(f));return r<0&&(r=p.findIndex(l=>c(l)===c(f))),s-r}))}},render(){return this.columns}}),_e=I({name:"QueryInput",props:{inputs:{type:Array,required:!0},name:{type:String,required:!0}},setup(e){const{inputs:n,name:t}=U(e);return{input:J(()=>n.value.find(p=>p.props.name===t.value))}},render(){return this.input}}),ge={class:"flex"},ye={class:"space-y-1"},$e=I({props:{params:{type:Object,required:!0}},emits:{search:null,reset:null},setup(e){var o,f;const n=e,{params:t}=U(n),u=ne();ae("params",t);const p=w([]),c=w([]);c.value=(f=(o=u.default)==null?void 0:o.call(u))!=null?f:[],p.value=c.value.map(s=>{var r,l;return{label:(r=s.props)==null?void 0:r.label,name:(l=s.props)==null?void 0:l.name}});const[V]=p.value,d=w([V.name]),g=J(()=>p.value.filter(s=>!d.value.includes(s.name))),i=()=>{Object.keys(t.value).forEach(s=>{!d.value.includes(s)&&d.value.findIndex(r=>r.split(",").includes(s))===-1&&delete t.value[s]})},k=s=>{if(s===0){const[r]=g.value;d.value[d.value.length]=r.name}else d.value.splice(s,1),i()};return(s,r)=>{const l=m("el-button"),E=m("el-option"),R=m("el-select"),K=m("el-button-group");return v(),$("form",ge,[F("div",ye,[(v(!0),$(B,null,j(d.value,(T,S)=>(v(),$("div",{key:T,class:"flex"},[_(l,{icon:S==0?a(re):a(ie),onClick:b=>k(S),disabled:S<=0&&a(g).length<=0,circle:""},null,8,["icon","onClick","disabled"]),_(R,{modelValue:d.value[S],"onUpdate:modelValue":b=>d.value[S]=b,onChange:r[0]||(r[0]=b=>i()),class:"w-36"},{default:y(()=>[(v(!0),$(B,null,j(p.value.filter(b=>b.name===d.value[S]||a(g).includes(b)),b=>(v(),h(E,{key:b.name,label:b.label,value:b.name},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),_(_e,{inputs:c.value,name:d.value[S]},null,8,["inputs","name"])]))),128))]),F("div",null,[_(K,{class:"ml-2"},{default:y(()=>[_(l,{"native-type":"submit",icon:a(oe),onClick:r[1]||(r[1]=se(T=>s.$emit("search"),["prevent"]))},{default:y(()=>[N(O(s.$t("search")),1)]),_:1},8,["icon"]),_(l,{icon:a(ue),onClick:r[2]||(r[2]=T=>s.$emit("reset"))},{default:y(()=>[N(O(s.$t("reset")),1)]),_:1},8,["icon"])]),_:1})])])}}}),be={key:0,class:"inline-block"},Ce=I({props:{label:{type:String,required:!0},name:{type:String,required:!0},type:{type:String},options:{type:Object}},setup(e){const n=e,t=de("params"),{name:u}=U(n),[p,c]=u.value.split(","),V=w(p),d=w(c);return(g,i)=>{const k=m("el-input-number"),o=m("el-date-picker"),f=m("el-option"),s=m("el-select"),r=m("el-input");return pe(g.$slots,"default",{},()=>[e.type==="number"?(v(),$("div",be,[_(k,{modelValue:a(t)[V.value],"onUpdate:modelValue":i[0]||(i[0]=l=>a(t)[V.value]=l),placeholder:g.$t("begin.number"),class:"w-48"},null,8,["modelValue","placeholder"]),_(k,{modelValue:a(t)[d.value],"onUpdate:modelValue":i[1]||(i[1]=l=>a(t)[d.value]=l),placeholder:g.$t("end.number"),class:"w-48"},null,8,["modelValue","placeholder"])])):e.type==="date"?(v(),h(o,{key:1,modelValue:a(t)[a(u)],"onUpdate:modelValue":i[2]||(i[2]=l=>a(t)[a(u)]=l),type:"daterange","start-placeholder":g.$t("begin.date"),"end-placeholder":g.$t("end.date"),class:"w-96"},null,8,["modelValue","start-placeholder","end-placeholder"])):e.type==="datetime"?(v(),h(o,{key:2,modelValue:a(t)[a(u)],"onUpdate:modelValue":i[3]||(i[3]=l=>a(t)[a(u)]=l),type:"datetimerange","start-placeholder":g.$t("begin.date"),"end-placeholder":g.$t("end.date"),class:"w-96"},null,8,["modelValue","start-placeholder","end-placeholder"])):e.options?(v(),h(s,{key:3,modelValue:a(t)[a(u)],"onUpdate:modelValue":i[4]||(i[4]=l=>a(t)[a(u)]=l),multiple:"",class:"w-96"},{default:y(()=>[(v(!0),$(B,null,j(e.options,l=>(v(),h(f,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(v(),h(r,{key:4,modelValue:a(t)[a(u)],"onUpdate:modelValue":i[5]||(i[5]=l=>a(t)[a(u)]=l),class:"w-96"},null,8,["modelValue"]))])}}});export{$e as _,Ce as a,he as b,Se as c};
