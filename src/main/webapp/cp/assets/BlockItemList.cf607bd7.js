var ee=Object.defineProperty,te=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var M=(d,n,o)=>n in d?ee(d,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[n]=o,O=(d,n)=>{for(var o in n||(n={}))ae.call(n,o)&&M(d,o,n[o]);if(F)for(var o of F(n))oe.call(n,o)&&M(d,o,n[o]);return d},R=(d,n)=>te(d,le(n));import{g as se,u as ne,D as i,i as z,L as ie,j as I,w as s,m,ai as de,o as b,n as l,q as me,A as re,F as ce,x as V,k as r,ab as ue,J as D,y as L,aj as pe,v as P,K as _e}from"./vendor.6c10456e.js";import{_ as be,d as ve,p as $,r as fe,o as ge}from"./index.e298dbcb.js";import{c as Ie}from"./config.b59763c6.js";import{p as ke,f as ye,r as $e}from"./content.4349420b.js";import{_ as he,a as we,b as Be,c as Ce}from"./QueryItem.08153dac.js";import{_ as Ve}from"./ListMove.8a454c07.js";import{_ as De}from"./BlockItemForm.59630113.js";import"./DialogForm.42204124.js";import"./BaseUpload.2f2e7916.js";const Le={class:"mb-3"},Se={class:"app-block mt-3"},Ne=se({setup(d){const{t:n}=ne(),o=i({}),v=i(),S=i(),k=i([]),f=i([]),h=i(!1),w=i(!1),N=i(),T=z(()=>k.value.map(t=>t.id)),Q=i(!1),y=i([]),u=i();z(()=>y.value.find(t=>t.id===Number(u.value)));const c=async()=>{h.value=!0;try{k.value=await ke(R(O({},ve(o.value)),{Q_EQ_blockId:Number(u.value),Q_OrderBy:v.value})),Q.value=Object.values(o.value).filter(t=>t!==void 0&&t!=="").length>0||v.value!==void 0}finally{h.value=!1}},U=async()=>{y.value=await Ie({Q_EQ_enabled_Boolean:!0}),u.value=String(y.value[0].id)};ie(async()=>{await U(),c()});const A=({column:t,prop:a,order:g})=>{var p;a?v.value=((p=t.sortBy)!=null?p:a)+(g==="descending"?"_desc":""):v.value=void 0,c()},J=()=>c(),K=()=>{S.value.clearSort(),fe(o.value),v.value=void 0,c()},E=t=>{N.value=t,w.value=!0},x=async t=>{await ye(t),c(),_e.success(n("success"))},G=async(t,a)=>{const g=ge(t,k.value,a);await $e(g.map(p=>p.id))};return(t,a)=>{const g=m("el-tab-pane"),p=m("el-tabs"),H=m("el-aside"),B=m("el-button"),j=m("el-popconfirm"),_=m("el-table-column"),q=m("el-image"),W=m("el-table"),X=m("el-main"),Y=m("el-container"),Z=de("loading");return b(),I(Y,null,{default:s(()=>[l(H,{width:"180px",class:"pr-3"},{default:s(()=>[l(p,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),onTabClick:a[1]||(a[1]=e=>c()),"tab-position":"left",stretch:"",class:"bg-white"},{default:s(()=>[(b(!0),me(ce,null,re(y.value,e=>(b(),I(g,{key:e.id,name:String(e.id),label:e.name},null,8,["name","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(X,{class:"p-0"},{default:s(()=>[V("div",Le,[l(r(he),{params:o.value,onSearch:J,onReset:K},{default:s(()=>[l(r(we),{label:t.$t("blockItem.title"),name:"Q_Contains_title"},null,8,["label"])]),_:1},8,["params"])]),V("div",null,[l(j,{title:t.$t("confirmDelete"),onConfirm:a[2]||(a[2]=e=>x(f.value.map(C=>C.id)))},{reference:s(()=>[l(B,{disabled:f.value.length<=0||r($)("blockItem:delete"),icon:r(ue)},{default:s(()=>[D(L(t.$t("delete")),1)]),_:1},8,["disabled","icon"])]),_:1},8,["title"]),l(Ve,{disabled:f.value.length<=0||Q.value||r($)("org:update"),onMove:a[3]||(a[3]=e=>G(f.value,e)),class:"ml-2"},null,8,["disabled"]),l(r(Be),{name:"blockItem",class:"ml-2"})]),V("div",Se,[pe((b(),I(W,{ref_key:"table",ref:S,data:k.value,onSelectionChange:a[4]||(a[4]=e=>f.value=e),onRowDblclick:a[5]||(a[5]=e=>E(e.id)),onSortChange:A},{default:s(()=>[l(r(Ce),{name:"blockItem"},{default:s(()=>[l(_,{type:"selection",width:"45"}),l(_,{property:"id",label:"ID",width:"64",sortable:"custom"}),l(_,{property:"title",label:t.$t("blockItem.title"),sortable:"custom","min-width":"200","show-overflow-tooltip":""},null,8,["label"]),l(_,{property:"image",label:t.$t("blockItem.image")},{default:s(({row:e})=>[e.image?(b(),I(q,{key:0,src:e.image,fit:"contain","preview-src-list":[e.image,e.mobileImage],style:{width:"100px",height:"100px"}},null,8,["src","preview-src-list"])):P("",!0)]),_:1},8,["label"]),l(_,{property:"mobileImage",label:t.$t("blockItem.mobileImage"),display:"none"},{default:s(({row:e})=>[e.mobileImage?(b(),I(q,{key:0,src:e.mobileImage,fit:"contain","preview-src-list":[e.mobileImage,e.image],style:{width:"100px",height:"100px"}},null,8,["src","preview-src-list"])):P("",!0)]),_:1},8,["label"]),l(_,{label:t.$t("table.action")},{default:s(({row:e})=>[l(B,{type:"text",disabled:r($)("blockItem:update"),onClick:C=>E(e.id),size:"small"},{default:s(()=>[D(L(t.$t("edit")),1)]),_:2},1032,["disabled","onClick"]),l(j,{title:t.$t("confirmDelete"),onConfirm:C=>x([e.id])},{reference:s(()=>[l(B,{type:"text",disabled:r($)("blockItem:delete"),size:"small"},{default:s(()=>[D(L(t.$t("delete")),1)]),_:1},8,["disabled"])]),_:2},1032,["title","onConfirm"])]),_:1},8,["label"])]),_:1})]),_:1},8,["data"])),[[Z,h.value]])]),l(De,{modelValue:w.value,"onUpdate:modelValue":a[6]||(a[6]=e=>w.value=e),beanId:N.value,beanIds:r(T),blockId:Number(u.value),onFinished:c},null,8,["modelValue","beanId","beanIds","blockId"])]),_:1})]),_:1})}}});var Pe=be(Ne,[["__scopeId","data-v-f6a971d2"]]);export{Pe as default};
